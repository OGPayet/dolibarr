diff a/htdocs/custom/requestmanager/list.php b/htdocs/custom/requestmanager/list.php	(rejected hunks)
@@ -84,8 +84,9 @@ $search_date_creation=GETPOST('search_date_creation','alpha');
 $search_date_modification=GETPOST('search_date_modification','alpha');
 $search_user_author=GETPOST('search_user_author','alpha');
 $search_user_modification=GETPOST('search_user_modification','alpha');
+$search_dont_show_children_request=GETPOST('search_dont_show_children_request','int');
 $search_status_det=GETPOST('search_status_det','array');
-$my_list=GETPOST('mylist','int');
+$mylist=GETPOST('mylist','int');
 $not_assigned=GETPOST('notassigned','int');
 $status_type=GETPOST('status_type','int');
 $optioncss = GETPOST('optioncss','alpha');
@@ -223,6 +224,7 @@ if (GETPOST('button_removefilter_x','alpha') || GETPOST('button_removefilter.x',
     $search_date_modification='';
     $search_user_author='';
     $search_user_modification='';
+    $search_dont_show_children_request='';
     $status_type=-1;
 	$toselect='';
     $search_array_options=array();
@@ -364,7 +366,7 @@ $sql.= ' LEFT JOIN '.MAIN_DB_PREFIX.'user as um ON um.rowid = rm.fk_user_modif';
 $sql.= ' LEFT JOIN '.MAIN_DB_PREFIX.'requestmanager_assigned_user as rmau ON rmau.fk_requestmanager = rm.rowid';
 $sql.= ' LEFT JOIN '.MAIN_DB_PREFIX.'requestmanager_assigned_usergroup as rmaug ON rmaug.fk_requestmanager = rm.rowid';
 if (count($search_tags)) $sql.= ' LEFT JOIN '.MAIN_DB_PREFIX."categorie_requestmanager as cp ON rm.rowid = cp.fk_requestmanager"; // We'll need this table joined to the select in order to filter by categ
-if ($search_assigned_user || $search_assigned_usergroup || $my_list || $not_assigned) {
+if ($search_assigned_user || $search_assigned_usergroup || $mylist || $not_assigned) {
     $sql .= ' INNER JOIN (';
     $sql .= '   SELECT rm.rowid';
     $sql .= '   FROM ' . MAIN_DB_PREFIX . 'requestmanager as rm';
@@ -375,7 +377,7 @@ if ($search_assigned_user || $search_assigned_usergroup || $my_list || $not_assi
     $sql .= '   WHERE rm.entity IN (' . getEntity('requestmanager') . ')';
     if ($search_assigned_user) $sql .= natural_search(array('uas.firstname', 'uas.lastname'), $search_assigned_user);
     if ($search_assigned_usergroup) $sql .= natural_search('uga.nom', $search_assigned_usergroup);
-    if ($my_list) {
+    if ($mylist) {
         $groupslist = $usergroup_static->listGroupsForUser($user->id);
         $sql .= ' AND (rmau.fk_user = ' . $user->id;
         if (!empty($groupslist)) {
@@ -421,6 +423,7 @@ if ($search_date_modification)  $sql.= natural_search('rm.tms', $search_date_mod
 if ($search_user_author)  $sql.= natural_search(array('ua.firstname', 'ua.lastname'), $search_user_author);
 if ($search_user_modification)  $sql.= natural_search(array('um.firstname', 'um.lastname'), $search_user_modification);
 if ($search_user_modification)  $sql.= natural_search(array('um.firstname', 'um.lastname'), $search_user_modification);
+if ($search_dont_show_children_request)  $sql.= ' AND rm.fk_parent IS NULL';
 if (count($search_status_det))  $sql.= natural_search(array('rm.fk_status'), implode(',', $search_status_det), 2);
 if ($status_type >= 0)  $sql.= ' AND crmst.type = ' . $status_type;
 elseif ($status_type == -2)  $sql.= ' AND crmst.type IN (' . RequestManager::STATUS_TYPE_INITIAL . ', ' . RequestManager::STATUS_TYPE_IN_PROGRESS . ')';
@@ -469,7 +472,7 @@ if ($resql) {
     $societestatic_watcher = new Societe($db);
 
     $title = $langs->trans('RequestManagerListOfRequests');
-    if ($my_list) $title .= ' (' . $langs->trans('RequestManagerMyRequest') . ')';
+    if ($mylist) $title .= ' (' . $langs->trans('RequestManagerMyRequest') . ')';
     if ($not_assigned) $title .= ' (' . $langs->trans('RequestManagerNotAssigned') . ')';
 
     $num = $db->num_rows($resql);
@@ -515,7 +518,8 @@ if ($resql) {
     if ($search_user_author) $param .= '&search_user_author=' . urlencode($search_user_author);
     if ($search_user_modification) $param .= '&search_user_modification=' . urlencode($search_user_modification);
     if (count($search_status_det)) $param .= '&search_status_det=' . urlencode($search_status_det);
-    if ($my_list) $param .= '&my_list=' . urlencode($my_list);
+    if ($search_dont_show_children_request) $param .= '&search_dont_show_children_request=' . urlencode($search_dont_show_children_request);
+    if ($mylist) $param .= '&mylist=' . urlencode($mylist);
     if ($not_assigned) $param .= '&not_assigned=' . urlencode($not_assigned);
     if ($status_type !== '' && $status_type != -1) $param .= '&status_type=' . urlencode($status_type);
     if ($optioncss != '') $param .= '&optioncss=' . urlencode($optioncss);
@@ -541,7 +545,7 @@ if ($resql) {
     print '<input type="hidden" name="sortfield" value="' . $sortfield . '">';
     print '<input type="hidden" name="sortorder" value="' . $sortorder . '">';
     print '<input type="hidden" name="page" value="' . $page . '">';
-    if ($my_list) print '<input type="hidden" name="my_list" value="' . dol_escape_htmltag($my_list) . '">';
+    if ($mylist) print '<input type="hidden" name="mylist" value="' . dol_escape_htmltag($mylist) . '">';
     if ($not_assigned) print '<input type="hidden" name="not_assigned" value="' . dol_escape_htmltag($not_assigned) . '">';
     if ($socid > 0) print '<input type="hidden" name="socid" value="' . $socid . '">';
     //if ($status_type != '' && $status_type != -1) print '<input type="hidden" name="status_type" value="' . dol_escape_htmltag($status_type) . '">';
@@ -589,6 +593,12 @@ if ($resql) {
         $moreforfilter .= '</div>';
     }
 
+    // Filter don't show children request
+    $moreforfilter .= '<div class="divsearchfield">';
+    $moreforfilter .= $langs->trans('RequestManagerDontShowChildrenRequest') . ': ';
+    $moreforfilter .= $form->selectyesno('search_dont_show_children_request', $search_dont_show_children_request,  1);
+    $moreforfilter .= '</div>';
+
     $parameters = array();
     $reshook = $hookmanager->executeHooks('printFieldPreListTitle', $parameters);    // Note that $action and $object may have been modified by hook
     if (empty($reshook)) $moreforfilter .= $hookmanager->resPrint;
@@ -932,6 +942,7 @@ if ($resql) {
         $objectstatic->ref = $obj->ref;
         $objectstatic->ref_ext = $obj->ref_ext;
         $objectstatic->fk_type = $obj->fk_type;
+        $objectstatic->fk_urgency = $obj->fk_urgency;
         $objectstatic->label = $obj->label;
         $objectstatic->socid = $obj->fk_soc;
         $objectstatic->thirdparty_origin = $societestatic_origin;
@@ -1029,7 +1040,8 @@ if ($resql) {
         }
         // Urgency
         if (!empty($arrayfields['rm.fk_urgency']['checked'])) {
-            print '<td class="nowrap">';
+            $color = $objectstatic->getColorUrgency();
+            print '<td class="nowrap"' . (empty($color) ? '' : ' style="background-color: ' . $color . ' !important;"') . '>';
             print $obj->urgency_label;
             print '</td>';
         }
